#:kivy 2.0
<MainWindow>:
	name: "main"
	GridLayout:
		cols:1
		spacing: 10
		padding: 10

		canvas.before:
	        Color:
	            rgba: (0.15, 0.15 ,0.15 ,1)
	        Rectangle:
	            pos: self.pos
	            size: self.size

		TextInput:
	        id: input
			text: '180'
	        hint_text:'Deine Größe in cm'
			multiline: False
			padding: [20, 20, 20, 20]
			size_hint_y: None
			height: 100

		Carousel:
		    direction: 'right'
		    AsyncImage:
		        source: 'images/Anleitung_01.png'
		    AsyncImage:
		        source: 'images/Anleitung_02.png'
		    AsyncImage:
		        source: 'images/Anleitung_03.png'
		    AsyncImage:
		        source: 'images/Anleitung_04.png'

		Button:
            text: "Submit"
			background_normal: ''
			background_color: ("#3584e4")
			size_hint_y: None
			height: 100
            on_release:
				if not root.checkData(): app.root.current = "second"; root.manager.transition.direction = "left"

<SecondWindow>:
    name: "second"

    Camera:
        id: camera
        play: True
		keep_ratio: True
		allow_stretch: True
		pos: self.pos
        size: self.size
		canvas.before:
            PushMatrix
            Rotate:
                angle: -90
                origin: self.center
        canvas.after:
            PopMatrix
	Label:
		id: crosshair
		Image:
			id: crosshair_image
			source: 'images/Crosshair.png'
			pos_hint: {"center_x":0.5, "center_y":0.5}
			center_x: self.parent.center_x
			center_y: self.parent.center_y

    Button:
		id: capture_button
        on_press: camera.play = False; root.addSchrittIndex()
		size_hint: (None, None)
		pos_hint: {"center_x":0.5, "center_y":0.1}
		background_color: 0, 0, 0, 0
		Image:
			id: capture_image
			source: 'images/CaptureButton.png'
			center_x: self.parent.center_x
			center_y: self.parent.center_y
		
	Button:
		id: go_back_redo_button
		size_hint: (None, None)
		pos_hint: {"center_x":0.2, "center_y":0.1}
        on_release:
			if go_back_redo_image.source == 'images/ReturnButton.png': app.root.current = "main"; root.manager.transition.direction = "right"
			if go_back_redo_image.source == 'images/RedoButton.png': camera.play = True; root.returnSchrittIndex()
		background_color: 0, 0, 0, 0
		Image:
			id: go_back_redo_image
			source: 'images/ReturnButton.png'
			center_x: self.parent.center_x
			center_y: self.parent.center_y

	Button:
		id: weiter_button
		disabled: True
		size_hint: (None, None)
		pos_hint: {"center_x":0.8, "center_y":0.1}
		background_color: 0, 0, 0, 0
		on_press: 
			camera.play = True; 
			root.disableWidget('go_back_redo_button', True); 
			root.addSchrittIndex()
			if root.schrittIndex == 5: app.root.current = "third"; root.manager.transition.direction = "left";

		Image:
			id: weiter_Image
			source: 'images/WeiterButton.png'
			center_x: self.parent.center_x
			center_y: self.parent.center_y

	Label:
		id: hinweis_label
		text: root.hinweis_label_text
		font_size:30
		size_hint_y: None
		height: 50
		halign: "center"
		pos_hint: {"x": 0, "y": 0.90}

	Label:
		id: distance_label
		text: '3.2 m'
		font_size: 20
		size_hint_y: None
		height: 50
		pos_hint: {"center_x":0.5, "center_y":0.25}

<ThirdWindow>:
	name: "third"

	GridLayout:
		cols:1
		spacing: 10
		padding: 10

		canvas.before:
	        Color:
	            rgba: (85/255, 85/255, 85/255, 1)
	        Rectangle:
	            pos: self.pos
	            size: self.size

		Label:
			id: result_label
			text: 'Ergebnisse'
			font_size: 40
			size_hint_y: None
			height: 50
			pos_hint: {"center_x":0.5, "center_y":0.9}
		
		Label:
			id: height_label
			text: 'Deine Höhe: 180'
			font_size: 20
			size_hint_y: None
			height: 50
			pos_hint: {"center_x":0.5, "center_y":0.8}

		Label:
			id: lowest_point_label
			text: 'Tiefster Punkt:'
			font_size: 30
			size_hint_y: None
			height: 50
			pos_hint: {"center_x":0.5, "center_y":0.7}
		Label:
			id: lowest_point_distance_label
			text: 'Abstand: 3.2 m'
			font_size: 20
			size_hint_y: None
			height: 50
			pos_hint: {"center_x":0.5, "center_y":0.65}
		Label:
			id: lowest_point_angle_label
			text: 'Winkel: 60°'
			font_size: 20
			size_hint_y: None
			height: 50
			pos_hint: {"center_x":0.5, "center_y":0.6}

		Label:
			id: highest_point_label
			text: 'Höchster Punkt:'
			font_size: 30
			size_hint_y: None
			height: 50
			pos_hint: {"center_x":0.5, "center_y":0.5}
		Label:
			id: highest_point_distance_label
			text: 'Abstand: 8.7 m'
			font_size: 20
			size_hint_y: None
			height: 50
			pos_hint: {"center_x":0.5, "center_y":0.45}
		Label:
			id: highest_point_angle_label
			text: 'Winkel: 105°'
			font_size: 20
			size_hint_y: None
			height: 50
			pos_hint: {"center_x":0.5, "center_y":0.4}

		Label:
			id: height_label
			text: 'Höhe: 18 m'
			font_size: 40
			size_hint_y: None
			height: 50
			pos_hint: {"center_x":0.5, "center_y":0.3}

	Button:
		id: go_back_button
		size_hint: (None, None)
		pos_hint: {"center_x":0.2, "center_y":0.1}
        on_release:
            app.root.current = "second"
            root.manager.transition.direction = "right"
		background_color: 0, 0, 0, 0
		Image:
			id: go_back_image
			source: 'images/ReturnButton.png'
			center_x: self.parent.center_x
			center_y: self.parent.center_y

	Button:
		id: new_button
		size_hint: (None, None)
		pos_hint: {"center_x":0.8, "center_y":0.1}
		background_color: 0, 0, 0, 0
        on_release:
            app.root.current = "fourth"
            root.manager.transition.direction = "right"
		Image:
			id: new_image
			source: 'images/RedoButton.png'
			center_x: self.parent.center_x
			center_y: self.parent.center_y

<FourthWindow>:
	Label:
		id: label1
		text: 'X: '
		font_size: 20
		size_hint_y: None
		height: 50
		pos_hint: {"center_x":0.5, "center_y":0.9}

	Label:
		id: label2
		text: 'Y: '
		font_size: 20
		size_hint_y: None
		height: 50
		pos_hint: {"center_x":0.5, "center_y":0.8}

	Label:
		id: label3
		text: 'Z: '
		font_size: 20
		size_hint_y: None
		height: 50
		pos_hint: {"center_x":0.5, "center_y":0.7}
	Label:
		id: status
		text: 'status: '
		font_size: 20
		size_hint_y: None
		height: 50
		pos_hint: {"center_x":0.5, "center_y":0.6}

	Label:
		id: distance
		text: 'distance: '
		font_size: 20
		size_hint_y: None
		height: 50
		pos_hint: {"center_x":0.5, "center_y":0.5}

    Button:
        id: button1
        size_hint_y: None
		height: 50
		pos_hint: {"center_x":0.5, "center_y":0.3}
        text: 'Start'
        on_press: root.pressed1()
